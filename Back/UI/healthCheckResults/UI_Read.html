<!-- UI_For_Health_Check_Results.html -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Check Results</title>

    <!-- Ant Design CSS CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.css">
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <read>
        <div id="container" class="padding-20-px">
            <h1>Health Check Results</h1>

            <!-- Table for displaying health check results -->
            <div id="health-check-table"></div>
        </div>

        <!-- React and ReactDOM CDN -->
        <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
        <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>

        <!-- Ant Design JavaScript CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.js"></script>

        <!-- Include Axios for API calls -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

        <script>
            // Columns for the Ant Design table
            const columns = [
                { title: 'Document ID', dataIndex: 'id', key: 'id' },
                { title: 'Full Name', dataIndex: 'fullName', key: 'fullName' },
                { title: 'Last Name', dataIndex: 'lastName', key: 'lastName' },
                { title: 'Weight (kg)', dataIndex: 'weight', key: 'weight' },
                { title: 'Height (cm)', dataIndex: 'height', key: 'height' },
                { title: 'BMI', dataIndex: 'bmi', key: 'bmi' },
                { title: 'Pulse Rate', dataIndex: 'pulseRate', key: 'pulseRate' },
                { title: 'Respiration rate', dataIndex: 'respirationRate', key: 'respirationRate' },
                { title: 'Temperature (Â°C)', dataIndex: 'temperature', key: 'temperature' },
                { title: 'Oxygen Level', dataIndex: 'oxygenLevel', key: 'oxygenLevel' },
                { title: 'Blood pressure', dataIndex: 'bloodPressure', key: 'bloodPressure' },
                { title: 'Mealtime', dataIndex: 'mealTime', key: 'mealTime' },
                { title: 'Hospital', dataIndex: 'hospital', key: 'hospital' },
                { title: 'More Details', dataIndex: 'moreDetails', key: 'moreDetails' },
                { title: 'Fastingtime', dataIndex: 'fastingTime', key: 'fastingTime' },
                { title: 'Fasting blood sugar', dataIndex: 'fastingBloodSugar', key: 'fastingBloodSugar' }
            ];

            // Function to create a table using React and Ant Design
            function HealthCheckTable({ data }) {
                const { Table } = antd;
                return React.createElement(Table, { columns, dataSource: data, pagination: true });
            }

            // Function to render the table in the DOM
            function renderTable(data) {
                ReactDOM.render(
                    React.createElement(HealthCheckTable, { data }),
                    document.getElementById('health-check-table')
                );
            }

            // Function to fetch health check results and display them
            function loadHealthCheckResults() {
                axios.get(`http://localhost:3000/health-check-result`)
                    .then(response => {
                        const data = response.data.map(item => ({
                            key: item.id,
                            id: item.id,
                            fullName: item.fullName,
                            lastName: item.lastName,
                            weight: item.weight,
                            height: item.height,
                            bmi: item.bmi,
                            pulseRate: item.pulseRate,
                            temperature: item.temperature,
                            oxygenLevel: item.oxygenLevel,
                            bloodPressure: item.bloodPressure,
                            hospital: item.hospital,
                            moreDetails: item.moreDetails,
                            respirationRate: item.respirationRate,
                            mealTime: item.mealTime,
                            fastingTime: item.fastingTime,
                            fastingBloodSugar: item.fastingBloodSugar
                        }));

                        // Render the table with the fetched data
                        renderTable(data);
                    })
                    .catch(error => {
                        console.error('Error fetching health check results:', error);
                    });
            }

            // Load the health check results when the page is loaded
            window.onload = loadHealthCheckResults;
        </script>
    </read>
</body>

</html>