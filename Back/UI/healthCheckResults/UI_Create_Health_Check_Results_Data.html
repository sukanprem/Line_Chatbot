<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Health Check Result</title>
  <!-- Ant Design CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.css" />
  <link rel="stylesheet" href="./style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.js"></script>
  <!-- Axios for HTTP requests -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <!-- <style>
    body {
      padding: 30px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .radio-group {
      margin-bottom: 20px;
    }

    .radio-group label {
      margin-right: 15px;
    }
  </style> -->
</head>

<body>
  <create>
    <div class="container">
      <h2>Add Health Check Result</h2>
      <form id="healthCheckForm">
        <div class="form-group">
          <label>ชื่อ</label>
          <input type="text" class="ant-input" name="fullName" required>
        </div>
        <div class="form-group">
          <label>นามสกุล</label>
          <input type="text" class="ant-input" name="lastName" required>
        </div>
        <div class="form-group">
          <label>น้ำหนัก</label>
          <input type="number" class="ant-input" name="weight" required>
        </div>
        <div class="form-group">
          <label>ส่วนสูง (cm)</label>
          <input type="number" class="ant-input" name="height" required>
        </div>
        <div class="form-group">
          <label>ชีพจร</label>
          <input type="number" class="ant-input" name="pulseRate" required>
        </div>
        <div class="form-group">
          <label>อุณหภูมิร่างกาย (°C)</label>
          <input type="number" class="ant-input" name="temperature" required>
        </div>
        <div class="form-group">
          <label>ออกซิเจนในเลือด (%)</label>
          <input type="number" class="ant-input" name="oxygenLevel" required>
        </div>
        <div class="form-group">
          <label>อัตราการหายใจ</label>
          <input type="number" class="ant-input" name="respirationRate" required>
        </div>
        <div class="form-group">
          <label>เวลาที่เจาะ</label>
          <div class="radio-group">
            <label><input type="radio" name="mealTime" value="เช้า" required> เช้า</label>
            <label><input type="radio" name="mealTime" value="บ่าย" required> บ่าย</label>
            <label><input type="radio" name="mealTime" value="เย็น" required> เย็น</label>
            <label><input type="radio" name="mealTime" value="ก่อนนอน" required> ก่อนนอน</label>
          </div>
        </div>
        <div class="form-group">
          <label>ช่วงเวลาที่เจาะ (เช่น 2 ชม. หลังอาหาร)</label>
          <input type="text" class="ant-input" name="fastingTime" required>
        </div>
        <div class="form-group">
          <label>ค่าน้ำตาลในเลือด</label>
          <input type="number" class="ant-input" name="fastingBloodSugar" required>
        </div>
        <div class="form-group">
          <label>ความดันโลหิต</label>
          <input type="text" class="ant-input" name="bloodPressure" required>
        </div>
        <div class="form-group">
          <label>โรงพยาบาลที่บันทึกผล</label>
          <input type="text" class="ant-input" name="hospital" required>
        </div>
        <div class="form-group">
          <label>รายละเอียดเพิ่มเติม (Optional)</label>
          <textarea class="ant-input" name="moreDetails"
            placeholder="กรอกรายละเอียดเพิ่มเติม โดยแยกบรรทัดด้วยการกด Enter"></textarea>
        </div>
        <div class="form-group">
          <button type="submit" class="ant-btn ant-btn-primary">Create</button>
        </div>
      </form>
    </div>

    <script>
      document.getElementById('healthCheckForm').addEventListener('submit', function (event) {
        event.preventDefault();

        // Gather form data
        const formData = new FormData(event.target);
        const data = {};
        formData.forEach((value, key) => {
          if(key === 'moreDetails') {
            // แปลงข้อมูลจาก textarea ให้เป็นอาเรย์โดยการแยกด้วยบรรทัดใหม่
            data[key] = value.split('\n').filter(line => line.trim() !== ""); // ลบบรรทัดว่างด้วย
          } else {
            data[key] = value;
          }
        });

        // Send POST request
        axios.post('http://localhost:3000/add-health-check-result', data)
          .then(response => {
            alert('Health check result added successfully!');
            event.target.reset(); // Reset form after successful submission
          })
          .catch(error => {
            console.error('Error adding health check result:', error);
            alert('Error adding health check result.');
          });
      });
    </script>
  </create>
</body>

</html>