<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Check Results</title>

  <link rel="stylesheet" href="./style.css" />

  <!-- Ant Design CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.css" />

  <!-- React and ReactDOM CDN -->
  <script src="https://unpkg.com/react/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>

  <!-- Ant Design JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.js"></script>

  <!-- Axios for HTTP requests -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- <style>
    body {
      padding: 30px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
  </style> -->
</head>

<body>
  <read>
    <div class="container">
      <h2>Health Check Results</h2>
      <div id="healthCheckResults"></div>
    </div>

    <script>
      // Fetch health check results and render table
      function fetchHealthCheckResults() {
        axios.get('http://localhost:3000/health-check-result')
          .then(response => {
            const healthCheckResults = response.data;

            // Define table columns
            const columns = [
              { title: 'Document ID', dataIndex: 'id', key: 'id' },  // Add Document ID column
              { title: 'Full Name', dataIndex: 'fullName', key: 'fullName' },
              { title: 'Last Name', dataIndex: 'lastName', key: 'lastName' },
              { title: 'Weight (kg)', dataIndex: 'weight', key: 'weight' },
              { title: 'Height (cm)', dataIndex: 'height', key: 'height' },
              { title: 'BMI', dataIndex: 'bmi', key: 'bmi' },
              { title: 'Pulse Rate', dataIndex: 'pulseRate', key: 'pulseRate' },
              { title: 'Temperature (Â°C)', dataIndex: 'temperature', key: 'temperature' },
              { title: 'Oxygen Level (%)', dataIndex: 'oxygenLevel', key: 'oxygenLevel' },
              { title: 'Respiration Rate', dataIndex: 'respirationRate', key: 'respirationRate' },
              { title: 'Fasting Blood Sugar', dataIndex: 'fastingBloodSugar', key: 'fastingBloodSugar' },
              { title: 'Blood Pressure', dataIndex: 'bloodPressure', key: 'bloodPressure' },
              { title: 'Hospital', dataIndex: 'hospital', key: 'hospital' },
              { title: 'Meal Time', dataIndex: 'mealTime', key: 'mealTime' },
              { title: 'Fasting Time', dataIndex: 'fastingTime', key: 'fastingTime' }
              // { title: 'More Details', dataIndex: 'moreDetails', key: 'moreDetails'}
            ];

            // Create Ant Design Table using UMD script
            const table = React.createElement(antd.Table, {
              columns: columns,
              dataSource: healthCheckResults,
              rowKey: 'id',
              pagination: { pageSize: 10 }
            });

            ReactDOM.render(table, document.getElementById('healthCheckResults'));
          })
          .catch(error => {
            console.error('Error fetching health check results:', error);
          });
      }

      // Fetch the health check results on page load
      fetchHealthCheckResults();
    </script>
  </read>
</body>

</html>